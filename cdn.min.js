function Ourpass(){this.isMobileDevice=/Mobi/i.test(window.navigator.userAgent),this.dStyle={ourpassParentModal:"\n    position: fixed;\n    z-index: 999999;\n    top: 0;\n    left: 0;\n    background-color: rgba(0,0,0,0.4);\n    height: 100%;\n    width: 100%;\n    overflow: auto;\n  ",ourpassIframe:"\n    height: 100vh;\n    width: 100%;\n  "},this.environments={sandbox:{baseUrl:"https://merchant-sandbox.ourpass.co"},production:{baseUrl:"https://merchant.ourpass.co"}},this.config={}}Ourpass.prototype.generateIframeSrc=function(){const e=this.clientInfo.items?JSON.stringify(this.clientInfo.items):"";return`${this.config.baseUrl}/checkout/?src=${this.clientInfo.src}&items=${e}&amount=${this.clientInfo.amount}&url=${this.clientInfo.url}&name=${this.clientInfo.name}&email=${this.clientInfo.email}&qty=${this.clientInfo.qty}&description=${this.clientInfo.description}&api_key=${this.clientInfo.api_key}&reference=${this.clientInfo.reference}&metadata=${this.clientInfo.metadata}&subAccountAuthKey=${this.clientInfo.subAccountAuthKey}`},Ourpass.prototype.g=function(){this.removeElement("ourpassParentModal"),this.clientInfo.onClose()},Ourpass.prototype.closeOnModal=function(){event.target==document.getElementById("ourpassParentModal")&&this.g()},Ourpass.prototype.createAnElement=function(e,t,n,s,o=null){var i=document.createElement(t);(i.style.cssText=s,o&&(i.innerHTML=o),i.setAttribute("id",n[0]),n.length>1&&i.setAttribute(`${n[1][0]}`,`${n[1][1]}`),e instanceof HTMLElement)?e.appendChild(i):"pass"==e?document.getElementById("button").parentNode.appendChild(i):document.getElementById(e).appendChild(i);return i},Ourpass.prototype.removeElement=function(e){e instanceof HTMLElement||(e=document.getElementById(e)),e&&e.parentNode&&e.parentNode.removeChild(e)},Ourpass.prototype.openIframe=function(e,t){let n=document.getElementById("ourpassParentModal");if(n&&n.remove(),this.clientInfo=e,"sandbox"===e.env)this.config=this.environments.sandbox;else this.config=this.environments.production;n=this.createAnElement(document.getElementsByTagName("body")[0],"div",["ourpassParentModal"],this.dStyle.ourpassParentModal),this.createAnElement("ourpassParentModal","div",["ourPassContentModal"]),this.createAnElement("ourPassContentModal","iframe",["dFrame",["src",this.generateIframeSrc()]],this.dStyle.ourpassIframe),window.OncloseData=e.onClose,window.addEventListener("message",(t=>{this.config.baseUrl===t.origin&&("false pass"==t.data&&(this.removeElement(n),this.clientInfo.onClose()),"false pass1"==t.data&&(this.removeElement(n),this.clientInfo.onSuccess(e)),"closeiframe"==t.data&&(this.clientInfo.onClose(),this.removeElement(n)))}))},window.OurpassCheckout=new Ourpass;
